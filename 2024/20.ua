Directions       ← [¯.⇌.¯.1_0]
ManhattanOffsets ← ⍉[⟜-⊸⇡]
ShiftBy          ← ⬚NaN↻⊙≡⬚NaN↻°⊟
$ ###############
$ #...#...#.....#
$ #.#.#.#.#.###.#
$ #S#...#.#.#...#
$ #######.#.#.###
$ #######.#.#...#
$ #######.#.###.#
$ ###..E#...#...#
$ ###.#######.###
$ #...###...#...#
$ #.#####.#.###.#
$ #.#...#.#.#...#
$ #.#.#.#.#.#.###
$ #...#...#...###
$ ###############
⍣(&fras"../inputs/2024/20.txt"◌)
⊜∘⊸≠@\n
⊃(=@E|=@S|≠@#)
∩(°¤⊚)
path(⊙◌▽◡⬚0⊡⊙⋅∘+Directions¤|≍)
°¤
≡⍜▽⋅NaN⊸=0°⊚▽+1°⊏
⊃(⍥₃⊸(⍉⇌)
  /+[∩₄(
      +1⇡20¤
      ≡(
        ⟜(-⊸(≡ShiftBy ManhattanOffsets))⊙¤
        /+♭×⊃(≥100|≠NaN)-
      )
      /+
    )]
| ⊃(⬚NaN↻1|⬚NaN↻¯1|≡⬚NaN↻1|≡⬚NaN↻¯1)
  /+♭×⊃(≥100|≠NaN)-2⌵⊟∩-
)
